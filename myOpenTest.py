#!/usr/bin/python2.7 -3
#-*- coding: utf-8 -*-

#
# (c) Raphael Jacquot 2014
# Licenced under the terms of the GNU GPL v3.0 or later
#

import config
import myOpenLayer1
import myOpenTempControl

class MyOpenApplication (object) :
    def __init__ (self) :
        self.system_loop = myOpenLayer1.MainLoop(myOpenLayer1.system_logger)
        self.monitor_socket = myOpenLayer1.OwnSocket(
                config.host,
                config.port,
                config.password,
                myOpenLayer1.OwnSocket.MONITOR)
        self.monitor_socket.set_data_callback(self.data_callback)
        self.system_loop.add_socket(self.monitor_socket)
        self.system_loop.run()

    def data_callback (self, msg) :
        self.monitor_socket.log (msg)

if __name__ == '__main__' :
    MyOpenApplication ()
